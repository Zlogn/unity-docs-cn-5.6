<!DOCTYPE html><html class="no-js">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-MC35ML');
    </script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<meta property="og:title" content="线性或伽马工作流程 - Unity Manual">
<title>线性或伽马工作流程 - Unity Manual</title>
<meta property="og:image" content="https://docs.unity3d.com/zh_CN/5.6/uploads/Main/LinearRendering-ColorSpaceSetting.png">
<meta name="description" content="The Unity Editor offers both linear and gamma workflows. The linear workflow has a color space crossover where Textures that were authored in gamma color space can be correctly and precisely rendered in linear color space. See documentation on Linear rendering overview for more information about gamma and linear color space.">
<meta property="og:description" content="The Unity Editor offers both linear and gamma workflows. The linear workflow has a color space crossover where Textures that were authored in gamma color space can be correctly and precisely rendered in linear color space. See documentation on Linear rendering overview for more information about gamma and linear color space.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFiles/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script>
      var docs_type = 'Manual';
      var lang = 'zh_CN';
      var page = 'LinearRendering-LinearOrGammaWorkflow';
      if(!page) page = 'index';
      var version = '560';
      var docs_versions = [{version: '2019.1',version_string: '2019.1'},{version: '2018.3',version_string: '2018.3'},{version: '2018.2',version_string: '2018.2'},{version: '2018.1',version_string: '2018.1'},{version: '2017.4',version_string: '2017.4'},{version: '2017.3',version_string: '2017.3'},{version: '2017.2',version_string: '2017.2'},{version: '2017.1',version_string: '2017.1'},{version: '5.6',version_string: '560'},{version: '5.5',version_string: '550'},{version: '5.4',version_string: '540'},{version: '5.3',version_string: '530'},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MC35ML" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="http://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>5.6</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/LinearRendering-LinearOrGammaWorkflow.html">2019.1</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/LinearRendering-LinearOrGammaWorkflow.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/LinearRendering-LinearOrGammaWorkflow.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/LinearRendering-LinearOrGammaWorkflow.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/LinearRendering-LinearOrGammaWorkflow.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/LinearRendering-LinearOrGammaWorkflow.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/LinearRendering-LinearOrGammaWorkflow.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/LinearRendering-LinearOrGammaWorkflow.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/LinearRendering-LinearOrGammaWorkflow.html">5.6</a></li>
<li><a class="docs_version_url_550" href="/zh_CN/550/Manual/LinearRendering-LinearOrGammaWorkflow.html">5.5</a></li>
<li><a class="docs_version_url_540" href="/zh_CN/540/Manual/LinearRendering-LinearOrGammaWorkflow.html">5.4</a></li>
<li><a class="docs_version_url_530" href="/zh_CN/530/Manual/LinearRendering-LinearOrGammaWorkflow.html">5.3</a></li>
</ul></div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/560/Documentation/Manual/LinearRendering-LinearOrGammaWorkflow.html">English</a></li>
<li><a data-lang="ja" href="/ja/560/Manual/LinearRendering-LinearOrGammaWorkflow.html">日本語</a></li>
<li><a data-lang="es" href="/es/560/Manual/LinearRendering-LinearOrGammaWorkflow.html">Español</a></li>
<li><a data-lang="kr" href="/kr/560/Manual/LinearRendering-LinearOrGammaWorkflow.html">한국어</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>Manual</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>5.6</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/LinearRendering-LinearOrGammaWorkflow.html">2019.1</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/LinearRendering-LinearOrGammaWorkflow.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/LinearRendering-LinearOrGammaWorkflow.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/LinearRendering-LinearOrGammaWorkflow.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/LinearRendering-LinearOrGammaWorkflow.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/LinearRendering-LinearOrGammaWorkflow.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/LinearRendering-LinearOrGammaWorkflow.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/LinearRendering-LinearOrGammaWorkflow.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/LinearRendering-LinearOrGammaWorkflow.html">5.6</a></li>
<li><a class="docs_version_url_550" href="/zh_CN/550/Manual/LinearRendering-LinearOrGammaWorkflow.html">5.5</a></li>
<li><a class="docs_version_url_540" href="/zh_CN/540/Manual/LinearRendering-LinearOrGammaWorkflow.html">5.4</a></li>
<li><a class="docs_version_url_530" href="/zh_CN/530/Manual/LinearRendering-LinearOrGammaWorkflow.html">5.3</a></li>
</ul></div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (5.6)</a></li>
<li><a href="Graphics.html">图形</a></li>
<li><a href="GraphicsOverview.html">图形概述</a></li>
<li><a href="LightingOverview.html">光照</a></li>
<li><a href="LightingRelated.html">相关主题</a></li>
<li><a href="LinearLighting.html">线性渲染概述</a></li>
<li>线性或伽马工作流程</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="LinearLighting.html"></a></span><div class="tip">线性渲染概述</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="LinearRendering-GammaTextures.html"></a></span><div class="tip">采用线性渲染的伽马纹理</div>
</div>
</div></div>
<h1>线性或伽马工作流程</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>The Unity Editor offers both linear and gamma workflows. The linear workflow has a color space crossover where <a href="textures">Textures</a> that were authored in gamma color space can be correctly and precisely rendered in linear color space. See documentation on <a href="LinearLighting.html">Linear rendering overview</a> for more information about gamma and linear color space.</p>

<p>如需进一步阅读这方面的信息，请参阅以下相关文档：</p>

<ul>
<li>
<a href="LinearLighting.html">线性渲染概述</a>，介绍线性和伽马颜色空间的背景信息。</li>
<li>
<a href="LinearRendering-GammaTextures.html">采用线性渲染的伽马纹理</a>，介绍线性工作流程中的伽马纹理。</li>
<li>
<a href="LinearRendering-LinearTextures.html">线性纹理</a>，介绍如何使用线性纹理。</li>
</ul>

<p>纹理倾向于保存在伽马颜色空间中，而着色器期望使用线性颜色空间。因此，在着色器中对纹理进行采样时，基于伽马的值会导致不准确的结果。为了解决此问题，可将 Unity 设置为使用 RGB 采样器从伽马采样跨越到线性采样。这样确保了线性工作流程中的着色器的所有输入和输出都在正确的颜色空间中，从而产生正确的结果。</p>

<p>要指定伽马或线性工作流程，请选择 <strong>Edit</strong> &gt; <strong>Project Settings</strong> &gt; <strong>Player__，然后打开 </strong>Player Settings<strong>。选择 </strong>Other Settings__ &gt; <strong>Rendering</strong> 并将 <strong>Color Space</strong> 更改为 <strong>Linear</strong> 或 __Gamma__（具体根据偏好而定）。</p>

<figure>
<img src="../uploads/Main/LinearRendering-ColorSpaceSetting.png" alt="Player Settings 窗口显示了 Color Space 设置">
<figcaption>Player Settings 窗口显示了 <strong>Color Space</strong> 设置</figcaption>
</figure>

<h2>伽马颜色空间工作流程</h2>

<p>While a linear workflow ensures more precise rendering, sometimes you may want a gamma workflow (for example, on some platforms the hardware only supports the gamma format - see Linear Supported Platforms below.)</p>

<p>为此，请在 Player Settings 窗口中将 <strong>Color Space</strong> 设置为 <strong>Gamma__（菜单：__Edit</strong> &gt; <strong>Project Settings</strong> &gt; __Player__）。选择此选项后，渲染管线将使用伽马颜色空间中存储的所有颜色和纹理；在着色器中使用纹理时不会从纹理中移除伽马校正。</p>

<p>请注意，通过在纹理的 <a href="UsingTheInspector.html">Inspector 窗口</a>中取消选中 <strong>sRGB (Color Texture)</strong> 复选框，即可选择在 <strong>Color Space: Gamma</strong> 模式下绕过 sRGB 采样。</p>

<p><strong>注意</strong>：即使这些值在伽马空间中，Unity Editor 的所有着色器计算仍然按照在线性空间中的方式处理它们的输入。为了确保获得可接受的最终结果，Editor 在将着色器输出写入帧缓冲区时进行调整以处理不匹配的格式，并且不对最终结果应用伽马校正。</p>

<h2>线性颜色空间工作流程</h2>

<p>使用线性颜色空间比使用伽马颜色空间提供更准确的渲染。</p>

<p>为此，请在 Player Settings 窗口中将 <strong>Color Space</strong> 设置为 <strong>Linear__（菜单：__Edit</strong> &gt; <strong>Project Settings</strong> &gt; __Player__）。</p>

<p>如果纹理是在线性或伽马颜色空间中创建的，则可使用线性颜色空间。向线性颜色空间着色器程序提供的伽马颜色空间纹理将在移除伽马校正后输入给着色器。</p>

<h3>线性纹理</h3>

<ul>
<li>选择 <strong>Color Space:</strong> <strong>Linear</strong> 将假设纹理位于伽马颜色空间内。Unity 在默认情况下使用 GPU 的 sRGB 采样器从伽马颜色空间跨越到线性颜色空间。如果纹理是在线性颜色空间内创建的，则需要绕过 sRGB 采样。请参阅有关<a href="LinearRendering-LinearTextures.html">使用线性纹理</a>的文档以了解更多信息。</li>
</ul>

<h3>伽马纹理</h3>

<ul>
<li>从伽马颜色空间跨越到线性颜色空间需要进行一些调整。请参阅有关<a href="LinearRendering-GammaTextures.html">采用线性渲染的伽马纹理</a>的文档以了解更多信息。</li>
</ul>

<h4>注意</h4>

<p>对于颜色，此转换是隐式应用的，因为 Unity Editor 在将值作为常量传递给 GPU 之前已将值转换为浮点数。在对纹理进行采样时，GPU 会自动移除伽马校正，将结果转换为线性空间。</p>

<p>这些输入随后传递给着色器，光照计算与正常情况下一样在线性空间中进行。将结果值写入帧缓冲区时，可直接对其执行伽马校正，也可将其保留在线性空间中稍后进行伽马校正，具体做法取决于当前的渲染配置。例如，在高动态范围 (HDR) 中，渲染结果保留在线性空间中稍后进行伽马校正。</p>

<h2>线性和伽马颜色空间之间的差异</h2>

<p>使用线性渲染时，光照方程式的输入值与伽玛空间中的输入值不同。这意味着根据不同颜色空间得出不同结果。例如，光线照射表面具有不同的响应曲线，并且图像效果的表现不同。</p>

<h3>光衰减</h3>

<p>基于距离和基于法线的光照在发生衰减时存在两个方面的差异：</p>

<ul>
<li><p>在线性模式下渲染时，执行的额外伽马校正会使光源半径变大。</p></li>
<li><p>光照边缘也显得更清晰。这更准确地模拟了表面上的光照强度衰减。</p></li>
</ul>

<figure>
<img src="../uploads/Main/LinearRendering-LightingSphereLinearGamma.png" alt="左：线性空间中的球体光照。右：伽马空间中的球体光照">
<figcaption>左：线性空间中的球体光照。右：伽马空间中的球体光照</figcaption>
</figure>

<h3>线性强度响应</h3>

<p>使用伽马渲染时，提供给着色器的颜色和纹理已经应用了伽马校正。在着色器中使用它们时，高亮度的颜色实际上比预期亮度值更亮（相对于线性光照）。这意味着，随着光照强度的增加，表面会以非线性方式变亮。这将导致许多位置的光照亮度过高。此外还可能给模型和场景带来褪色的感觉。使用线性渲染时，在表面上产生的响应随着光照强度增加仍保持线性。因此，带来的表面着色真实得多，表面产生的颜色响应也好得多。</p>

<p>下面的无限 3D 头部扫描图像展示了在线性光照和伽马光照模式下人体头部模型上的不同光照强度。</p>

<figure>
<img src="../uploads/Main/LinearRendering-Infinite3DHeadScan.png" alt="Infinite 3D Head Scan by Lee Perry-Smith, licensed under a Creative Commons Attribution 3.0 Unported License (available from www.ir-ltd.net)">
<figcaption>Infinite 3D Head Scan by Lee Perry-Smith, licensed under a Creative Commons Attribution 3.0 Unported License (available from www.ir-ltd.net)</figcaption>
</figure>

<h3>线性和伽马混合</h3>

<p>当混入帧缓冲区时，混合发生在帧缓冲区的颜色空间中。</p>

<p>使用伽马空间渲染时，非线性颜色会混合在一起。这种混合颜色的方法在数学上不正确，并可能得出不符合期望的结果，但这种方法是在某些图形硬件上进行混合的唯一方法。</p>

<p>使用线性空间渲染时，混合发生在线性颜色空间中：这在数学上是正确的，并提供精确的结果。</p>

<p>下图显示了不同类型的混合：</p>

<figure>
<img src="../uploads/Main/LinearRendering-BlendingLinearGamma.png" alt="Top: Blending in linear color space produces expected blending results&lt;br/&gt;Bottom: Blending in gamma color space results in over-saturated and overly-bright blends">
<figcaption>Top: Blending in linear color space produces expected blending results<br>Bottom: Blending in gamma color space results in over-saturated and overly-bright blends</figcaption>
</figure>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="LinearLighting.html"></a></span><div class="tip">线性渲染概述</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="LinearRendering-GammaTextures.html"></a></span><div class="tip">采用线性渲染的伽马纹理</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">Copyright © 2017 Unity Technologies. Publication 5.6</div>
<div class="menu">
<a href="http://unity3d.com/learn">Tutorials</a><a href="http://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="http://forum.unity3d.com">Forums</a><a href="http://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
