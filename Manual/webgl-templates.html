<!DOCTYPE html><html class="no-js">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-MC35ML');
    </script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<meta property="og:title" content="使用 WebGL 模板 - Unity Manual">
<title>使用 WebGL 模板 - Unity Manual</title>
<meta property="og:image" content="https://docs.unity3d.com/zh_CN/5.6/uploads/Main/WebGLTemplate1.png">
<meta name="description" content="构建 WebGL 项目时，Unity 会将播放器嵌入到 HTML 页面中，以便能在浏览器中进行播放。默认页面是一个简单的白色页面，其中的灰色画布上有一个加载进度条。或者，可在 Player Settings Inspector（菜单：Edit &gt; Project Settings &gt; Player）中选择最小模板（仅使用必要的样板代码来运行 WebGL 内容）。">
<meta property="og:description" content="构建 WebGL 项目时，Unity 会将播放器嵌入到 HTML 页面中，以便能在浏览器中进行播放。默认页面是一个简单的白色页面，其中的灰色画布上有一个加载进度条。或者，可在 Player Settings Inspector（菜单：Edit &gt; Project Settings &gt; Player）中选择最小模板（仅使用必要的样板代码来运行 WebGL 内容）。">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFiles/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script>
      var docs_type = 'Manual';
      var lang = 'zh_CN';
      var page = 'webgl-templates';
      if(!page) page = 'index';
      var version = '560';
      var docs_versions = [{version: '2019.1',version_string: '2019.1'},{version: '2018.3',version_string: '2018.3'},{version: '2018.2',version_string: '2018.2'},{version: '2018.1',version_string: '2018.1'},{version: '2017.4',version_string: '2017.4'},{version: '2017.3',version_string: '2017.3'},{version: '2017.2',version_string: '2017.2'},{version: '2017.1',version_string: '2017.1'},{version: '5.6',version_string: '560'},{version: '5.5',version_string: '550'},{version: '5.4',version_string: '540'},{version: '5.3',version_string: '530'},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MC35ML" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="http://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>5.6</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/webgl-templates.html">2019.1</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/webgl-templates.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/webgl-templates.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/webgl-templates.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/webgl-templates.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/webgl-templates.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/webgl-templates.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/webgl-templates.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/webgl-templates.html">5.6</a></li>
<li><a class="docs_version_url_550" href="/zh_CN/550/Manual/webgl-templates.html">5.5</a></li>
<li><a class="docs_version_url_540" href="/zh_CN/540/Manual/webgl-templates.html">5.4</a></li>
<li><a class="docs_version_url_530" href="/zh_CN/530/Manual/webgl-templates.html">5.3</a></li>
</ul></div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/560/Documentation/Manual/webgl-templates.html">English</a></li>
<li><a data-lang="ja" href="/ja/560/Manual/webgl-templates.html">日本語</a></li>
<li><a data-lang="es" href="/es/560/Manual/webgl-templates.html">Español</a></li>
<li><a data-lang="kr" href="/kr/560/Manual/webgl-templates.html">한국어</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>Manual</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>5.6</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/webgl-templates.html">2019.1</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/webgl-templates.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/webgl-templates.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/webgl-templates.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/webgl-templates.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/webgl-templates.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/webgl-templates.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/webgl-templates.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/webgl-templates.html">5.6</a></li>
<li><a class="docs_version_url_550" href="/zh_CN/550/Manual/webgl-templates.html">5.5</a></li>
<li><a class="docs_version_url_540" href="/zh_CN/540/Manual/webgl-templates.html">5.4</a></li>
<li><a class="docs_version_url_530" href="/zh_CN/530/Manual/webgl-templates.html">5.3</a></li>
</ul></div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (5.6)</a></li>
<li><a href="PlatformSpecific.html">特定于平台的信息</a></li>
<li><a href="webgl.html">WebGL</a></li>
<li><a href="webgl-gettingstarted.html">WebGL 开发入门</a></li>
<li>使用 WebGL 模板</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="webgl-interactingwithbrowserscripting.html"></a></span><div class="tip">WebGL：与浏览器脚本交互</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="webgl-cursorfullscreen.html"></a></span><div class="tip">WebGL 中的光标锁定和全屏模式</div>
</div>
</div></div>
<h1>使用 WebGL 模板</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>构建 WebGL 项目时，Unity 会将播放器嵌入到 HTML 页面中，以便能在浏览器中进行播放。默认页面是一个简单的白色页面，其中的灰色画布上有一个加载进度条。或者，可在 Player Settings Inspector（菜单：Edit &gt; Project Settings &gt; Player）中选择最小模板（仅使用必要的样板代码来运行 WebGL 内容）。</p>

<figure>
<img src="../uploads/Main/WebGLTemplate1.png" alt="">
</figure>

<p>内置的 HTML 页面适合用于测试和演示最小的播放器，但若是为了生产目的，通常希望播放器托管在最终要部署到的页面中。例如，如果 Unity 内容通过外部调用接口与页面中的其他元素交互，则必须使用提供这些交互元素的页面对其进行测试。Unity 允许使用 __WebGL 模板__提供您自己的页面来托管播放器。</p>

<h2>WebGL 模板的结构</h2>

<p>将自定义模板添加到项目中的方法是在 Assets 文件夹中创建名为“WebGLTemplates”的文件夹，并且模板本身将作为此文件夹中的子文件夹。每个模板文件夹都包含一个 <em>index.html</em> 文件以及页面所需的任何其他资源，例如图像或样式表。</p>

<figure>
<img src="../uploads/Main/WebGLTemplate2.png" alt="">
</figure>

<p>创建模板后，该模板将显示在 Player Settings Inspector 的选项中。（模板的名称将与其文件夹相同）。（可选）文件夹可包含名为 <em>thumbnail.png</em> 的文件，其尺寸应为 128x128 像素。该缩略图将显示在 Inspector 中，用于提示完成的页面的外观。</p>

<p>该 html 文件至少需要包含以下元素：</p>

<ul>
<li><p>Unity WebGL 加载程序的脚本标记：
<code>&lt;script src="%UNITY_WEBGL_LOADER_URL%"&gt;&lt;/script&gt;</code></p></li>
<li><p>Script for instantiating the game: <code>&lt;script&gt; var gameInstance = UnityLoader.instantiate("gameContainer", "%UNITY_WEBGL_BUILD_URL%"); &lt;/script&gt;</code></p></li>
<li><p>一个 <code>&lt;div&gt;</code> 标签，其中的 <em>id</em> 用在实例化函数中。此 div 的内容将替换为游戏实例。</p></li>
</ul>

<h2><strong>UnityLoader.instantiate(container, url, override)</strong></h2>

<p><em>UnityLoader.instantiate</em> 负责创建内容的新实例。</p>

<ul>
<li><p><strong>container </strong>可以是 DOM 元素（通常为 <code>&lt;div&gt;</code> 元素）或是 DOM 元素的 id。如果提供的是 DOM 元素，则会立即实例化游戏。如果提供的是 DOM 元素的 id，则会在解析整个文档之后实例化游戏（这意味着可提供在 <em>UnityLoader.instantiate()</em> 调用时尚未创建的 DOM 元素的 id）。</p></li>
<li><p><strong>url</strong> 指定 json 文件的地址，此文件包含有关构建的信息（可使用 <em>%UNITY_WEBGL_BUILD_URL%</em> 变量，构建时会自动解析该变量）。</p></li>
<li><p><strong>override</strong> 是可选参数，可用于覆盖游戏实例的默认属性。例如，您可以覆盖 <em>onProgress</em> 和 <em>popup</em> 函数，因为它们是游戏实例的属性。请注意，<em>Module</em> 也是游戏实例的属性，因此可在实例化时覆盖 <em>Module</em> 的属性。请参考以下示例：</p></li>
</ul>

<pre><code>UnityLoader.instantiate("MyContainer", “build/MyBuild.json”, {
    onProgress: MyProgressFunction,
    Module: {
        TOTAL_MEMORY: 268435456,
        onRuntimeInitialized: MyInitializationCallbackFunction,
    },
});
</code></pre>

<h2>Template Tags</h2>

<p>During the build process, Unity will look for special tag strings in the page text and replace them with values supplied by the editor. These include the name, onscreen dimensions and various other useful information about the player.</p>

<p>The tags are delimited by percent signs (%) in the page source. For example, if the product name is defined as “MyPlayer” in the Player settings:-</p>

<p><code>&lt;title&gt;%UNITY_WEB_NAME%&lt;/title&gt;</code></p>

<p>将在该构建生成的主机页面中使用</p>

<p><code>&lt;title&gt;MyPlayer&lt;/title&gt;</code></p>

<p>进行替换。完整的标签集如下：</p>

<ul>
<li><p>__UNITY_WEB_NAME__：播放器的名称。</p></li>
<li><p><strong>UNITY_WEBGL_LOADER_URL</strong>: Url of the UnityLoader.js script, which performs instantiation of the build.</p></li>
<li><p><strong>UNITY_WEBGL_BUILD_URL</strong>: Url of the JSON file, containing all the necessary information about the build.</p></li>
<li><p><strong>UNITY_WIDTH</strong> 和 __UNITY_HEIGHT__：播放器的屏幕宽度和高度（以像素为单位）。</p></li>
<li><p><strong>UNITY_CUSTOM_SOME_TAG</strong>: If you add a tag to the index file with the form UNITY_CUSTOM_XXX, then this tag will appear in the Player Settings when your template is selected. For example, if something like <code>&lt;title&gt;Unity Player | %UNITY_CUSTOM_MYTAG%&lt;/title&gt;</code> is added to the source, the Player Settings will look like this:-</p></li>
</ul>

<figure>
<img src="../uploads/Main/WebGLTemplate3.png" alt="">
</figure>

<p>The textbox next to the tag’s name contains the text that the custom tag will be replaced with during the build.</p>

<h2>Example</h2>

<p>To illustrate the use of the template tags, here is the HTML source that Unity uses for its minimal WebGL template.</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en-us"&gt;

  &lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;
    &lt;title&gt;Unity WebGL Player | %UNITY_WEB_NAME%&lt;/title&gt;
    &lt;script src="%UNITY_WEBGL_LOADER_URL%"&gt;&lt;/script&gt;
    &lt;script&gt;
    var gameInstance = UnityLoader.instantiate("gameContainer", "%UNITY_WEBGL_BUILD_URL%");
    &lt;/script&gt;
  &lt;/head&gt;
  
  &lt;body&gt;
    &lt;div id="gameContainer" style="width: %UNITY_WIDTH%px; height: %UNITY_HEIGHT%px; margin: auto"&gt;&lt;/div&gt;
  &lt;/body&gt;
  
&lt;/html&gt;
</code></pre>

<p>Both minimal and default templates can be found in the Unity installation folder under Editor\Data\PlaybackEngines\WebGLSupport\BuildTools\WebGLTemplates on Windows or /PlaybackEngines/WebGLSupport/BuildTools/WebGLTemplates on Mac.</p>

<h2>Adding a progress bar</h2>

<p>Unity WebGL content will automatically render a default progress bar for you when it loads. You can override the default loading bar by providing your own progress function as an additional instantiation parameter. For example:</p>

<pre><code>var gameInstance = UnityLoader.instantiate("gameContainer", "%UNITY_WEBGL_BUILD_URL%", {onProgress: UnityProgress});
</code></pre>

<p>where <code>UnityProgress</code> is a function of 2 arguments: <code>gameInstance</code> (identifies the game instance the progressbar belongs to) and <code>progress</code> (a value from 0.0 to 1.0, providing information about the current loading progress).</p>

<p>For example, the progress function in the default WebGL template looks the following way:</p>

<pre><code>var gameInstance = UnityLoader.instantiate("gameContainer", "%UNITY_WEBGL_BUILD_URL%", {onProgress: UnityProgress});
</code></pre>

<p>where UnityProgress is a function of 2 arguments: gameInstance (identifies the game instance the progressbar belongs to) and progress (a value from 0.0 to 1.0, providing information about the current loading progress).</p>

<p>For example, the progress function in the default WebGL template looks the following way:</p>

<pre><code>function UnityProgress(gameInstance, progress) {
  if (!gameInstance.Module)
    return;
  if (!gameInstance.logo) {
    gameInstance.logo = document.createElement("div");
    gameInstance.logo.className = "logo " + gameInstance.Module.splashScreenStyle;
    gameInstance.container.appendChild(gameInstance.logo);
  }
  if (!gameInstance.progress) {    
    gameInstance.progress = document.createElement("div");
    gameInstance.progress.className = "progress " + gameInstance.Module.splashScreenStyle;
    gameInstance.progress.empty = document.createElement("div");
    gameInstance.progress.empty.className = "empty";
    gameInstance.progress.appendChild(gameInstance.progress.empty);
    gameInstance.progress.full = document.createElement("div");
    gameInstance.progress.full.className = "full";
    gameInstance.progress.appendChild(gameInstance.progress.full);
    gameInstance.container.appendChild(gameInstance.progress);
  }
  gameInstance.progress.full.style.width = (100 * progress) + "%";
  gameInstance.progress.empty.style.width = (100 * (1 - progress)) + "%";
  if (progress == 1)
    gameInstance.logo.style.display = gameInstance.progress.style.display = "none";
}
</code></pre>

<p>You can use it as is or as reference for your own templates. Since the progress bar is completely implemented in JavaScript, you can customize or replace it to show anything you want as a progress indication.</p>

<hr>

<ul>
<li><p><span class="page-edit">2017–05–24 Page amended with no <a href="DocumentationEditorialReview.html">editorial review</a> - <a href="LeaveFeedback.html">Leave page feedback</a></span></p></li>
<li><p><span class="page-history">Updated in 5.6</span></p></li>
</ul>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="webgl-interactingwithbrowserscripting.html"></a></span><div class="tip">WebGL：与浏览器脚本交互</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="webgl-cursorfullscreen.html"></a></span><div class="tip">WebGL 中的光标锁定和全屏模式</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">Copyright © 2017 Unity Technologies. Publication 5.6</div>
<div class="menu">
<a href="http://unity3d.com/learn">Tutorials</a><a href="http://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="http://forum.unity3d.com">Forums</a><a href="http://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
