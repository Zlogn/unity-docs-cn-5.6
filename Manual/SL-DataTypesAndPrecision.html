<!DOCTYPE html><html class="no-js">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-MC35ML');
    </script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<meta property="og:title" content="着色器数据类型和精度 - Unity Manual">
<title>着色器数据类型和精度 - Unity Manual</title>
<meta name="description" content="The standard Shader language in Unity is HLSL,
and general HLSL data types are supported. However, Unity has some
additions to the HLSL types, particularly for better support on mobile
platforms.">
<meta property="og:description" content="The standard Shader language in Unity is HLSL,
and general HLSL data types are supported. However, Unity has some
additions to the HLSL types, particularly for better support on mobile
platforms.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFiles/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script>
      var docs_type = 'Manual';
      var lang = 'zh_CN';
      var page = 'SL-DataTypesAndPrecision';
      if(!page) page = 'index';
      var version = '560';
      var docs_versions = [{version: '2019.1',version_string: '2019.1'},{version: '2018.4',version_string: '2018.4'},{version: '2018.3',version_string: '2018.3'},{version: '2018.2',version_string: '2018.2'},{version: '2018.1',version_string: '2018.1'},{version: '2017.4',version_string: '2017.4'},{version: '2017.3',version_string: '2017.3'},{version: '2017.2',version_string: '2017.2'},{version: '2017.1',version_string: '2017.1'},{version: '5.6',version_string: '560'},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MC35ML" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="http://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>5.6</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/SL-DataTypesAndPrecision.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/Manual/SL-DataTypesAndPrecision.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/SL-DataTypesAndPrecision.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/SL-DataTypesAndPrecision.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/SL-DataTypesAndPrecision.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/SL-DataTypesAndPrecision.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/SL-DataTypesAndPrecision.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/SL-DataTypesAndPrecision.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/SL-DataTypesAndPrecision.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/SL-DataTypesAndPrecision.html">5.6</a></li>
</ul></div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/560/Documentation/Manual/SL-DataTypesAndPrecision.html">English</a></li>
<li><a data-lang="ja" href="/ja/560/Manual/SL-DataTypesAndPrecision.html">日本語</a></li>
<li><a data-lang="es" href="/es/560/Manual/SL-DataTypesAndPrecision.html">Español</a></li>
<li><a data-lang="kr" href="/kr/560/Manual/SL-DataTypesAndPrecision.html">한국어</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>Manual</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>5.6</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/SL-DataTypesAndPrecision.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/Manual/SL-DataTypesAndPrecision.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/SL-DataTypesAndPrecision.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/SL-DataTypesAndPrecision.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/SL-DataTypesAndPrecision.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/SL-DataTypesAndPrecision.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/SL-DataTypesAndPrecision.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/SL-DataTypesAndPrecision.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/SL-DataTypesAndPrecision.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/SL-DataTypesAndPrecision.html">5.6</a></li>
</ul></div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (5.6)</a></li>
<li><a href="Graphics.html">图形</a></li>
<li><a href="GraphicsReference.html">图形参考</a></li>
<li><a href="SL-Reference.html">着色器参考</a></li>
<li><a href="SL-ShaderPrograms.html">编写顶点和片元着色器</a></li>
<li>着色器数据类型和精度</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="SL-ShaderCompileTargets.html"></a></span><div class="tip">着色器编译目标级别</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="SL-Shader.html"></a></span><div class="tip">ShaderLab 语法</div>
</div>
</div></div>
<h1>着色器数据类型和精度</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>The standard Shader language in Unity is <a href="SL-ShadingLanguage.html">HLSL</a>,
and general HLSL data types are supported. However, Unity has some
additions to the HLSL types, particularly for better support on mobile
platforms.</p>

<h2>基本数据类型</h2>

<p>着色器中的大多数计算是对浮点数（在 C# 等常规编程语言中为 <code>float</code>）进行的。浮点类型有几种变体：<code>float</code>、<code>half</code> 和 <code>fixed</code>（以及它们的矢量/矩阵变体，比如 <code>half3</code> 和 <code>float4x4</code>）。这些类型的精度不同（因此性能或功耗也不同）：</p>

<h4>高精度：<code>float</code>
</h4>

<p>最高精度浮点值；一般是 32 位（就像常规编程语言中的 <code>float</code>）。</p>

<p>Full <code>float</code> precision is generally used for world space positions,
texture coordinates, or scalar computations involving complex functions such as trigonometry or power/exponentiation.</p>

<h4>中等精度：<code>half</code>
</h4>

<p>中等精度浮点值；通常为 16 位（范围为 –60000 至 +60000，精度约为 3 位小数）。</p>

<p>半精度对于短矢量、方向、对象空间位置、高动态范围颜色非常有用。</p>

<h4>低精度：<code>fixed</code>
</h4>

<p>最低精度的定点值。通常是 11 位，范围从 –2.0 到 +2.0，精度为 1/256。</p>

<p>固定精度对于常规颜色（通常存储在常规纹理中）以及对它们执行简单运算非常有用。</p>

<h4>整数数据类型</h4>

<p>整数（<code>int</code> 数据类型）通常用作循环计数器或数组索引。为此，它们通常可以在各种平台上正常工作。</p>

<p>根据平台的不同，GPU 可能不支持整数类型。例如，Direct3D 9 和 OpenGL ES 2.0 GPU 仅对浮点数据进行运算，并且可以使用相当复杂的浮点数学指令来模拟简单的整数表达式（涉及位运算或逻辑运算）。</p>

<p>Direct3D 11、OpenGL ES 3、Metal 和其他现代平台都对整数数据类型有适当的支持，因此使用位移位和位屏蔽可以按预期工作。</p>

<h2>复合矢量/矩阵类型</h2>

<p>HLSL 具有从基本类型创建的内置矢量和矩阵类型。例如，<code>float3</code> 是一个 3D 矢量，具有分量 .x、.y 和 .z，而 <code>half4</code> 是一个中等精度 4D 矢量，具有分量 .x、.y、.z 和 .w。或者，可使用 .r、.g、.b 和 .a 分量来对矢量编制索引，这在处理颜色时很有用。</p>

<p>矩阵类型以类似的方式构建；例如 <code>float4x4</code> 是一个 4x4 变换矩阵。请注意，某些平台仅支持方形矩阵，最主要的是 OpenGL ES 2.0。</p>

<h2>纹理/采样器类型</h2>

<p>通常按照如下方式在 HLSL 代码中声明纹理：</p>

<pre><code>sampler2D _MainTex;
samplerCUBE _Cubemap;
</code></pre>

<p>For mobile platforms, these translate into “low precision
samplers”, i.e. the textures are expected to have low
precision data in them. If you know your texture contains
HDR colors, you might want to use half precision sampler:</p>

<pre><code>sampler2D_half _MainTex;
samplerCUBE_half _Cubemap;
</code></pre>

<p>Or if your texture contains full float
precision data (e.g. <a href="SL-DepthTextures.html">depth texture</a>), use a full precision sampler:</p>

<pre><code>sampler2D_float _MainTex;
samplerCUBE_float _Cubemap;
</code></pre>

<h2>精度、硬件支持和性能</h2>

<p>One complication of <code>float</code>/<code>half</code>/<code>fixed</code> data type usage is that PC GPUs are <strong>always</strong> high precision. That is, for all the
PC (Windows/Mac/Linux) GPUs, it does not matter
whether you write <code>float</code>, <code>half</code> or <code>fixed</code> data types in your shaders.
They always compute everything in full 32-bit floating point
precision.</p>

<p>The <code>half</code> and <code>fixed</code> types only become relevant when
targeting mobile GPUs, where these types primarily exist for
power (and sometimes performance) constraints. Keep in
mind that you need to test your shaders on mobile to see
whether or not you are running into precision/numerical issues.</p>

<p>Even on mobile GPUs, the different precision support varies
between GPU families. Here’s an overview of how each mobile
GPU family treats each floating point type (indicated by the number
of bits used for it):</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">GPU 产品系列</th>
	<th style="text-align:left;">浮点精度</th>
	<th style="text-align:left;">半精度</th>
	<th style="text-align:left;">固定精度</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">PowerVR 系列 6/7</td>
	<td style="text-align:left;">32</td>
	<td style="text-align:left;" colspan="2">16</td>
</tr>
<tr>
	<td style="text-align:left;">PowerVR SGX 5xx</td>
	<td style="text-align:left;">32</td>
	<td style="text-align:left;">16</td>
	<td style="text-align:left;">11</td>
</tr>
<tr>
	<td style="text-align:left;">Qualcomm Adreno 4xx/3xx</td>
	<td style="text-align:left;">32</td>
	<td style="text-align:left;" colspan="2">16</td>
</tr>
<tr>
	<td style="text-align:left;">Qualcomm Adreno 2xx</td>
	<td style="text-align:left;" colspan="3">32 顶点，24 片元</td>
</tr>
<tr>
	<td style="text-align:left;">ARM Mali T6xx/7xx</td>
	<td style="text-align:left;">32</td>
	<td style="text-align:left;" colspan="2">16</td>
</tr>
<tr>
	<td style="text-align:left;">ARM Mali 400/450</td>
	<td style="text-align:left;" colspan="3">32 顶点，16 片元</td>
</tr>
<tr>
	<td style="text-align:left;">NVIDIA X1</td>
	<td style="text-align:left;">32</td>
	<td style="text-align:left;" colspan="2">16</td>
</tr>
<tr>
	<td style="text-align:left;">NVIDIA K1</td>
	<td style="text-align:left;" colspan="3">32</td>
</tr>
<tr>
	<td style="text-align:left;">NVIDIA Tegra 3/4</td>
	<td style="text-align:left;">32</td>
	<td style="text-align:left;" colspan="2">16</td>
</tr>
</tbody>
</table>

<p>Most modern mobile GPUs actually only support
either 32-bit numbers (used for <code>float</code> type) or 16-bit numbers
(used for both <code>half</code> and <code>fixed</code> types). Some older GPUs have different precisions for vertex shader and fragment shader computations.</p>

<p>Using lower precision can often be faster, either due to improved
GPU register allocation, or due to special “fast path” execution
units for certain lower-precision math operations. Even when there’s no raw performance advantage, using lower precision often uses less power on the GPU, leading to better battery life.</p>

<p>一般的经验法则是全部都从半精度开始（但位置和纹理坐标除外）。仅当半精度对于计算的某些部分不足时，才增加精度。</p>

<h4>支持无穷大、非数字和其他特殊浮点值</h4>

<p>对特殊浮点值的支持可能会有所不同，具体取决于运行的 GPU 产品系列（主要是移动端）。</p>

<p>All PC GPUs that support Direct3D 10 support very well-specified IEEE 754 floating point
standard. This means that float numbers behave exactly like
they do in regular programming languages on the CPU.</p>

<p>Mobile GPUs can have slightly different levels of support. On some, dividing zero
by zero might result in a NaN (“not a number”); on others it might result in infinity, zero or any other unspecified value. Make sure to test your shaders on the target device to check they are supported.</p>

<h2>外部 GPU 文档</h2>

<p>GPU vendors have in-depth guides about the performance and
capabilities of their GPUs. See these for details:</p>

<ul>
<li><a href="http://malideveloper.arm.com/documentation/developer-guides/arm-guide-unity-enhancing-mobile-games/">ARM Mali Guide for Unity Developers</a></li>
<li><a href="https://developer.qualcomm.com/software/adreno-gpu-sdk/tools">Qualcomm Adreno OpenGL ES 开发者指南 (Qualcomm Adreno OpenGL ES Developer Guide)</a></li>
<li><a href="https://community.imgtec.com/developers/powervr/documentation/">PowerVR 架构指南 (PowerVR Architecture Guides)</a></li>
</ul>

<h2>另请参阅</h2>

<ul>
<li><a href="SL-PlatformDifferences.html">平台特定的渲染差异</a></li>
<li><a href="SL-ShaderPerformance.html">着色器性能提示</a></li>
<li><a href="SL-ShadingLanguage.html">着色语言</a></li>
</ul>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="SL-ShaderCompileTargets.html"></a></span><div class="tip">着色器编译目标级别</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="SL-Shader.html"></a></span><div class="tip">ShaderLab 语法</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">Copyright © 2017 Unity Technologies. Publication 5.6</div>
<div class="menu">
<a href="http://unity3d.com/learn">Tutorials</a><a href="http://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="http://forum.unity3d.com">Forums</a><a href="http://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
