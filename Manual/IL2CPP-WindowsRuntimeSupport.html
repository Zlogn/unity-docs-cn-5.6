<!DOCTYPE html><html class="no-js">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-MC35ML');
    </script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<meta property="og:title" content="Windows 运行时支持 - Unity Manual">
<title>Windows 运行时支持 - Unity Manual</title>
<meta property="og:image" content="https://docs.unity3d.com/zh_CN/5.6/uploads/Main/IL2CPP-4.png">
<meta name="description" content="Unity includes Windows Runtime support for IL2CPP on Windows Store and Xbox One platforms. Use Windows Runtime support to call into both native system Windows Runtime APIs as well as custom .winmd files directly from managed code (scripts and DLLs).">
<meta property="og:description" content="Unity includes Windows Runtime support for IL2CPP on Windows Store and Xbox One platforms. Use Windows Runtime support to call into both native system Windows Runtime APIs as well as custom .winmd files directly from managed code (scripts and DLLs).">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFiles/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script>
      var docs_type = 'Manual';
      var lang = 'zh_CN';
      var page = 'IL2CPP-WindowsRuntimeSupport';
      if(!page) page = 'index';
      var version = '560';
      var docs_versions = [{version: '2019.1',version_string: '2019.1'},{version: '2018.4',version_string: '2018.4'},{version: '2018.3',version_string: '2018.3'},{version: '2018.2',version_string: '2018.2'},{version: '2018.1',version_string: '2018.1'},{version: '2017.4',version_string: '2017.4'},{version: '2017.3',version_string: '2017.3'},{version: '2017.2',version_string: '2017.2'},{version: '2017.1',version_string: '2017.1'},{version: '5.6',version_string: '560'},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MC35ML" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="http://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>5.6</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/IL2CPP-WindowsRuntimeSupport.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/Manual/IL2CPP-WindowsRuntimeSupport.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/IL2CPP-WindowsRuntimeSupport.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/IL2CPP-WindowsRuntimeSupport.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/IL2CPP-WindowsRuntimeSupport.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/IL2CPP-WindowsRuntimeSupport.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/IL2CPP-WindowsRuntimeSupport.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/IL2CPP-WindowsRuntimeSupport.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/IL2CPP-WindowsRuntimeSupport.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/IL2CPP-WindowsRuntimeSupport.html">5.6</a></li>
</ul></div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">Manual</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">Scripting API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/560/Documentation/Manual/IL2CPP-WindowsRuntimeSupport.html">English</a></li>
<li><a data-lang="ja" href="/ja/560/Manual/IL2CPP-WindowsRuntimeSupport.html">日本語</a></li>
<li><a data-lang="es" href="/es/560/Manual/IL2CPP-WindowsRuntimeSupport.html">Español</a></li>
<li><a data-lang="kr" href="/kr/560/Manual/IL2CPP-WindowsRuntimeSupport.html">한국어</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>Manual</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>5.6</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2019.1" href="/zh_CN/2019.1/Manual/IL2CPP-WindowsRuntimeSupport.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/zh_CN/2018.4/Manual/IL2CPP-WindowsRuntimeSupport.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/zh_CN/2018.3/Manual/IL2CPP-WindowsRuntimeSupport.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/zh_CN/2018.2/Manual/IL2CPP-WindowsRuntimeSupport.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/zh_CN/2018.1/Manual/IL2CPP-WindowsRuntimeSupport.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/zh_CN/2017.4/Manual/IL2CPP-WindowsRuntimeSupport.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/zh_CN/2017.3/Manual/IL2CPP-WindowsRuntimeSupport.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/zh_CN/2017.2/Manual/IL2CPP-WindowsRuntimeSupport.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/zh_CN/2017.1/Manual/IL2CPP-WindowsRuntimeSupport.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/zh_CN/560/Manual/IL2CPP-WindowsRuntimeSupport.html">5.6</a></li>
</ul></div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (5.6)</a></li>
<li><a href="ScriptingSection.html">脚本</a></li>
<li><a href="ScriptingTools.html">脚本工具</a></li>
<li><a href="IL2CPP.html">IL2CPP</a></li>
<li>Windows 运行时支持</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="IL2CPP-CompilerOptions.html"></a></span><div class="tip">编译器选项</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="IL2CPP-HowItWorks.html"></a></span><div class="tip">IL2CPP 的工作原理</div>
</div>
</div></div>
<h1>Windows 运行时支持</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Unity includes Windows Runtime support for <a href="IL2CPP.html">IL2CPP</a> on Windows Store and Xbox One platforms. Use Windows Runtime support to call into both native system Windows Runtime APIs as well as custom .winmd files directly from managed code (scripts and DLLs).</p>

<p>要在 IL2CPP 中自动启用 Windows 运行时支持，请访问 PlayerSettings (<strong>Edit</strong> &gt; <strong>Project Settings</strong> &gt; <strong>Player</strong>)，导航到 <strong>Configuration</strong> 部分，并将 <strong>Api Compatibility Level</strong> 设置为 <strong>.NET 4.6</strong>。</p>

<figure>
<img src="../uploads/Main/IL2CPP-4.png" alt="PlayerSettings 窗口的 Configuration 部分。上面显示的选项会根据选择的构建平台而变化。">
<figcaption>PlayerSettings 窗口的 <strong>Configuration</strong> 部分。上面显示的选项会根据选择的构建平台而变化。</figcaption>
</figure>

<p>Unity automatically references Windows Runtime APIs (such as <em>Windows.winmd</em> on Windows Store) when it has Windows Runtime support enabled. To use custom .winmd files, import them (together with any accompanying DLLs) into your Unity project folder. Then use the <a href="PluginInspector.html">Plugin Inspector</a> to configure the files for your target platform.</p>

<figure>
<img src="../uploads/Main/IL2CPP-5.png" alt="使用 Plugin Inspector 为特定平台配置自定义的 .winmd 文件。 ">
<figcaption>使用 Plugin Inspector 为特定平台配置自定义的 .winmd 文件。
</figcaption>
</figure>

<p>In your Unity project’s <a href="ScriptingSection.html">scripts</a> you can use the <code>ENABLE_WINMD_SUPPORT</code> #define directive to check that your project has Windows Runtime support enabled. Use this before a call to .winmd Windows APIs or custom .winmd scripts to ensure they can run and to ensure any scripts not relevant to Windows ignore them. See the examples below. </p>

<p><strong>示例</strong></p>

<p><strong><code>C#</code></strong></p>

<pre><code>void Start() {
  #if ENABLE_WINMD_SUPPORT
    Debug.Log("Windows Runtime Support enabled");
    // 在此处放置对自定义 .winmd API 的调用
  #endif
}
</code></pre>

<p><strong><code>JS</code></strong></p>

<pre><code>function Awake() {
  #if ENABLE_WINMD_SUPPORT
    Debug.Log("Windows Runtime Support enabled");
    // Put calls to your custom .winmd API here
  #endif
}
</code></pre>

<p>除了在 IL2CPP 中启用 Windows 运行时支持时进行定义，也可在 .NET 中将 <strong>Compilation Overrides</strong> 设置为 <strong>Use Net Core</strong> 时进行定义。</p>

<figure>
<img src="../uploads/Main/IL2CPP-6.png" alt="PlayerSettings Inspector 窗口的 Publishing Settings 部分，其中以红色突出显示了 Compilation Overrides">
<figcaption>PlayerSettings Inspector 窗口的 Publishing Settings 部分，其中以红色突出显示了 <strong>Compilation Overrides</strong></figcaption>
</figure>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="IL2CPP-CompilerOptions.html"></a></span><div class="tip">编译器选项</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="IL2CPP-HowItWorks.html"></a></span><div class="tip">IL2CPP 的工作原理</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">Copyright © 2017 Unity Technologies. Publication 5.6</div>
<div class="menu">
<a href="http://unity3d.com/learn">Tutorials</a><a href="http://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="http://forum.unity3d.com">Forums</a><a href="http://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
