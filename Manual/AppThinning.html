<!DOCTYPE html><html class="no-js" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<meta property="og:title" content="应用程序精简 - Unity 手册">
<title>应用程序精简 - Unity 手册</title>
<meta property="og:image" content="https://docs.unity3d.com/cn/5.6/uploads/Main/AppThinning-BuildSettings.png">
<meta name="description" content="The Apple store and iOS optimize the installation of iOS, tvOS, and watchOS apps by tailoring app delivery to the capabilities of the user’s particular device. This optimization is called app thinning. App thinning lets you create apps that use the most device features, occupy minimum disk space, and accommodate future updates that can be applied by Apple. Learn more about this optimization process on Apple&amp;#8217;s Developer Library page on App Thinning.">
<meta property="og:description" content="The Apple store and iOS optimize the installation of iOS, tvOS, and watchOS apps by tailoring app delivery to the capabilities of the user’s particular device. This optimization is called app thinning. App thinning lets you create apps that use the most device features, occupy minimum disk space, and accommodate future updates that can be applied by Apple. Learn more about this optimization process on Apple&amp;#8217;s Developer Library page on App Thinning.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFiles/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script>
      var docs_type = 'Manual';
      var lang = 'cn';
      var page = 'AppThinning';
      if(!page) page = 'index';
      var version = '560';
      var docs_versions = [{version: '2020.1',version_string: '2020.1'},{version: '2019.3',version_string: '2019.3'},{version: '2019.2',version_string: '2019.2'},{version: '2019.1',version_string: '2019.1'},{version: '2018.4',version_string: '2018.4'},{version: '2018.3',version_string: '2018.3'},{version: '2018.2',version_string: '2018.2'},{version: '2018.1',version_string: '2018.1'},{version: '2017.4',version_string: '2017.4'},{version: '2017.3',version_string: '2017.3'},{version: '2017.2',version_string: '2017.2'},{version: '2017.1',version_string: '2017.1'},{version: '5.6',version_string: '560'},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/cn/560/Manual/AppThinning.html">
<link rel="alternate" href="https://docs.unity3d.com/en/560/Manual/AppThinning.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/ja/560/Manual/AppThinning.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/es/560/Manual/AppThinning.html" hreflang="es">
<link rel="alternate" href="https://docs.unity3d.com/kr/560/Manual/AppThinning.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/ru/560/Manual/AppThinning.html" hreflang="ru">
<link rel="alternate" href="https://docs.unity3d.com/560/Documentation/Manual/AppThinning.html" hreflang="x-default">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="http://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="搜索手册..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>5.6</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/AppThinning.html">2020.1</a></li>
<li><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/AppThinning.html">2019.3</a></li>
<li><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/AppThinning.html">2019.2</a></li>
<li><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/AppThinning.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/AppThinning.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/AppThinning.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/AppThinning.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/AppThinning.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/AppThinning.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/AppThinning.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/AppThinning.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/AppThinning.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/cn/560/Manual/AppThinning.html">5.6</a></li>
</ul></div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">语言:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/560/Documentation/Manual/AppThinning.html">English</a></li>
<li><a data-lang="ja" href="/ja/560/Manual/AppThinning.html">日本語</a></li>
<li><a data-lang="es" href="/es/560/Manual/AppThinning.html">Español</a></li>
<li><a data-lang="kr" href="/kr/560/Manual/AppThinning.html">한국어</a></li>
<li><a data-lang="ru" href="/ru/560/Manual/AppThinning.html">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>手册</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>5.6</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;"><ul>
<li><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/AppThinning.html">2020.1</a></li>
<li><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/AppThinning.html">2019.3</a></li>
<li><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/AppThinning.html">2019.2</a></li>
<li><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/AppThinning.html">2019.1</a></li>
<li><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/AppThinning.html">2018.4</a></li>
<li><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/AppThinning.html">2018.3</a></li>
<li><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/AppThinning.html">2018.2</a></li>
<li><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/AppThinning.html">2018.1</a></li>
<li><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/AppThinning.html">2017.4</a></li>
<li><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/AppThinning.html">2017.3</a></li>
<li><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/AppThinning.html">2017.2</a></li>
<li><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/AppThinning.html">2017.1</a></li>
<li><a class="docs_version_url_560" href="/cn/560/Manual/AppThinning.html">5.6</a></li>
</ul></div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (5.6)</a></li>
<li><a href="PlatformSpecific.html">特定于平台的信息</a></li>
<li><a href="iphone.html">iOS</a></li>
<li>iOS 高级主题</li>
<li>应用程序精简</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="iosCustomWWWRequest.html"></a></span><div class="tip">Customising WWW Requests on iOS</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="iphone-unsupported.html"></a></span><div class="tip">Unity iOS 目前不支持的功能</div>
</div>
</div></div>
<h1>应用程序精简</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>The Apple store and iOS optimize the installation of iOS, tvOS, and watchOS apps by tailoring app delivery to the capabilities of the user’s particular device. This optimization is called app thinning. App thinning lets you create apps that use the most device features, occupy minimum disk space, and accommodate future updates that can be applied by Apple. Learn more about this optimization process on <a href="https://developer.apple.com/library/tvos/documentation/IDEs/Conceptual/AppDistributionGuide/AppThinning/AppThinning.html">Apple’s Developer Library page on App Thinning</a>.</p>

<p>本章介绍可以在 Unity 中实现的应用程序精简的两个主要组件：</p>

<ul>
<li><a href="#OnDemandresources">On-demand resources (ODR)</a></li>
<li><a href="#AppSlicing">应用程序切片</a></li>
</ul>

<p><a name="OnDemandResources"></a> </p>

<h1>按需加载资源</h1>

<p>按需加载资源 (ODR) 是适用于 iOS 和 tvOS 平台（从 iOS 和 tvOS 9.0 版开始）的功能。此功能允许将核心资源（应用程序启动时需要的资源）与可选资源（或者出现在游戏后期关卡中的资源）分开，从而减小应用程序的大小。这些附加资源称为 <a href="AssetBundlesIntro.html">AssetBundles</a>。它们可用于所有 Unity 构建目标，但必须采取额外步骤才能通过 App Store 托管它们。</p>

<p>AssetBundles can contain Asset files such as models, Materials, Textures and Scenes, but they cannot include scripts. This means that all your scripting logic must reside in the main application. Apple recommends that an AssetBundle be no larger than 64MB in size, to reduce loading time (particularly over 3G) and minimize the amount of storage space used on the device.</p>

<h2>设置 ODR</h2>

<p>要对项目进行 ODR 设置，请首先确认构建类型设置为 iOS。在菜单栏中，选择 <strong>File</strong> &gt; <strong>Build Settings</strong>。</p>

<figure>
<img src="../uploads/Main/AppThinning-BuildSettings.png" alt="">
</figure>

<p>If it isn’t selected already, click on <strong>iOS</strong>, then click the <strong>Switch Platform</strong> button. Next, click the <strong>Player Settings…</strong> button<strong>. </strong>In the Inspector window, open <strong>Other Settings,</strong> navigate to the <strong>Configuration</strong> section, and check the <strong>Use on demand resources</strong> checkbox.</p>

<figure>
<img src="../uploads/Main/AppThinning-OtherSettings.png" alt="">
</figure>

<h2>创建 AssetBundle</h2>

<p>首先，创建一个新文件夹以放置需要添加到 AssetBundle 的资源。要执行此操作，请在 Project 窗口内右键单击，然后选择 <strong>Create</strong> &gt; <strong>Folder__（或单击 Project 窗口左上角的 </strong>Create__ &gt; __Folder__）。</p>

<figure>
<img src="../uploads/Main/AppThinning-CreateFolder.png" alt="">
</figure>

<p>选择要添加到 AssetBundle 的资源文件，然后将它们拖放到新文件夹中。</p>

<p>创建 AssetBundle 时，需要为其分配一个标签，该标签将在请求下载 AssetBundle 时用作标识符。最好创建一个与捆绑包的文件名匹配的标签；这样可以确保标签的唯一性，并便于以后使用时进行识别。</p>

<p>To create or assign a tag, select your new folder and navigate to the Asset Labels section at the bottom of the Inspector window. Click the left-hand drop-down menu, select <strong>New…</strong>, and enter the name of your new label. Note that AssetBundle labels must be lower-case.</p>

<figure>
<img src="../uploads/Main/AppThinning-AssetLabels.png" alt="">
</figure>

<p>In this example, a folder called “Textures” is being given a new label</p>

<p>To generate the new AssetBundle file, the new label must be referenced in an Editor script. To create an Editor script, create a new folder inside the Project window called “Editor”. Right-click on the “Editor” folder and select <strong>Create</strong> &gt; <strong>C# Script</strong>. Name the new script <strong>BuildiOSAssetBundles.cs</strong>.</p>

<figure>
<img src="../uploads/Main/AppThinning-NewScript.png" alt="">
</figure>

<p>In this example, the “Textures” folder has been given the label “textures”. The new script <strong>BuildiOSAssetBundles.cs</strong> has been created in the “Editor” folder.</p>

<p>Open <strong>BuildiOSAssetBundles.cs</strong> and copy in the code below. In this example the label “textures” has been used; change this throughout with the name of your label (in lower-case text):</p>

<pre><code>using UnityEngine;
using UnityEditor;


public class BuildiOSAssetBundles : MonoBehaviour
{
    [InitializeOnLoadMethod]
    static void SetupResourcesBuild( )
    {
        UnityEditor.iOS.BuildPipeline.collectResources += CollectResources;
    }

    static UnityEditor.iOS.Resource[] CollectResources( )
    {
        return new UnityEditor.iOS.Resource[]
        {
            new UnityEditor.iOS.Resource( "textures", "Assets/ODR/textures" ).AddOnDemandResourceTags( "textures" ),
            new UnityEditor.iOS.Resource( "bundle", "Assets/Bundles/bundle.unity3d" ).AddOnDemandResourceTags( "bundle" ),
        };
    }

    [MenuItem( "Bundle/Build iOS AssetBundle" )]
    static void BuildAssetBundles( )
    {
        var options = BuildAssetBundleOptions.None;

        bool shouldCheckODR = EditorUserBuildSettings.activeBuildTarget == BuildTarget.iOS;

# if UNITY_TVOS
            shouldCheckODR |= EditorUserBuildSettings.activeBuildTarget == BuildTarget.tvOS;
# endif

        if( shouldCheckODR )
        {
# if ENABLE_IOS_ON_DEMAND_RESOURCES
            if( PlayerSettings.iOS.useOnDemandResources )
                options |= BuildAssetBundleOptions.UncompressedAssetBundle;
# endif

# if ENABLE_IOS_APP_SLICING
            options |= BuildAssetBundleOptions.UncompressedAssetBundle;
# endif
        }

        BuildPipeline.BuildAssetBundles( "Assets/ODR", options, EditorUserBuildSettings.activeBuildTarget );
    }

}
</code></pre>

<p>The significant line in the above code sample is the following, which takes the files tagged with the “textures” label and creates an AssetBundle file called “textures” within the Assets/ODR folder:</p>

<pre><code>new UnityEditor.iOS.Resource( "textures", "Assets/ODR/textures" ).AddOnDemandResourceTags( "textures" )
</code></pre>

<p>For demonstration purposes, the above code sample also includes the following line, which adds an AssetBundle called “bundle” that has already been built - for example, from another project or a third-party vendor:</p>

<pre><code>new UnityEditor.iOS.Resource( "bundle", "Assets/Bundles/bundle.unity3d" ).AddOnDemandResourceTags( "bundle" )
</code></pre>

<p>The whole code sample creates a new menu in the Unity Editor menu bar. Go to <strong>Bundle</strong> &gt; <strong>Build iOS AssetBundle</strong>. This generates the AssetBundles in the <strong>ODR</strong> folder.</p>

<figure>
<img src="../uploads/Main/AppThinning-BuildiOSAssetBundle.png" alt="">
</figure>

<p>The following script downloads the “textures” ODR Asset Bundle, assigning it to the public member <strong>TextureBundle</strong>. Place this somewhere in your project.</p>

<pre><code>using UnityEngine;
using UnityEngine.iOS;
using System;
using System.Collections;

public class LoadBundle : MonoBehaviour
{
    public AssetBundle     TextureBundle;


    void Start( )
    {
        StartCoroutine( LoadAsset( "textures", "textures" ) );
    }

    public IEnumerator LoadAsset( string resourceName, string odrTag )
    {
        // 创建请求
        OnDemandResourcesRequest request = OnDemandResources.PreloadAsync( new string[] { odrTag } );

        // 等待请求完成
        yield return request;

        // 检查是否有错误
        if( request.error != null )
            throw new Exception( "ODR request failed: " + request.error );

        TextureBundle = AssetBundle.LoadFromFile( "res://" + resourceName );

        request.Dispose( );
    }
}
</code></pre>

<p>下一步是生成 Xcode 项目，构建 .IPA，并将其上传到 iTunes Connect 的 TestFlight。在 TestFlight 处理过程中，嵌入式 ODR AssetBundles 将从应用程序中删除并托管在 Apple 的服务器上，可供下载。</p>

<p>在 Xcode 中构建 .IPA 之前，请检查 XCode 的 Build Settings，确保 Assets 部分中的 <strong>Embed Asset packs In Product Bundle</strong> 设置为 <strong>No__，而 </strong>Enable On Demand Resources__ 设置为 <strong>Yes</strong>。</p>

<figure>
<img src="../uploads/Main/AppThinning-XCodeBuildSettings.png" alt="">
</figure>

<p>iTunes Connect 处理完应用程序的上传后，单击 TestFlight Builds 中的构建版本即可查看相关的更多信息：</p>

<figure>
<img src="../uploads/Main/AppThinning-XCodeTestFlightBuilds.png" alt="">
</figure>

<p><a name="AppSlicing"></a></p>

<h2>应用程序切片</h2>

<p>App slicing follows a similar process to on-demand resourcing, allowing you to dynamically download Assets according the specification of the device the app is running on - for example, to download high-resolution Assets for retina iPads, and low-resolution Assets for smaller devices like iPhones and the iPad Mini. This is achieved by defining AssetBundles, with the added provision of <strong>variants</strong>. This way, you can decide at startup which variant to use, and automatically append this to the Asset file name upon download.</p>

<p>To create a Variant, click on your new folder and navigate to the <strong>Asset Labels</strong> section at the bottom of the Inspector window. Click on the right-hand drop-down menu, select <strong>New…</strong>, and enter the name of your new variant. Note that AssetBundle variants must be lower-case.</p>

<figure>
<img src="../uploads/Main/AppThinning-AssetBundleVariants.png" alt="">
</figure>

<p>The new variant must be referenced in an Editor script. To create an Editor script, create a new folder inside the Project window called “Editor”. Right-click on the Editor folder and select <strong>Create</strong> &gt; <strong>C# Script.</strong> Name the new script <strong>BuildiOSAppSlices.cs</strong>.</p>

<p>复制并粘贴下面的代码，将示例标签（“textures”）和变体（“hd”和“sd”）替换为您自己的标签和变体。在此代码示例中，引用了多个文件夹：一个包含 HD 纹理，一个包含 SD 纹理。它们分别被赋予了变体“hd”和“sd”。</p>

<pre><code>using UnityEngine;
using UnityEditor;


public class BuildiOSAppSlices : MonoBehaviour
{
    [InitializeOnLoadMethod]
    static void SetupResourcesBuild( )
    {
        UnityEditor.iOS.BuildPipeline.collectResources += CollectResources;
    }

    static UnityEditor.iOS.Resource[] CollectResources( )
    {
        return new UnityEditor.iOS.Resource[]
        {
            new UnityEditor.iOS.Resource("textures").BindVariant( "Assets/ODR/textures.hd", "hd" )
                                     .BindVariant( "Assets/ODR/textures.sd", "sd" )
                     .AddOnDemandResourceTags( "textures" ),
    };
    }

    [MenuItem( "Bundle/Build iOS App Slices" )]
    static void BuildAssetBundles( )
    {
        var options = BuildAssetBundleOptions.None;

        bool shouldCheckODR = EditorUserBuildSettings.activeBuildTarget == BuildTarget.iOS;

# if UNITY_TVOS
            shouldCheckODR |= EditorUserBuildSettings.activeBuildTarget == BuildTarget.tvOS;
# endif

        if( shouldCheckODR )
        {
# if ENABLE_IOS_ON_DEMAND_RESOURCES
            if( PlayerSettings.iOS.useOnDemandResources )
                options |= BuildAssetBundleOptions.UncompressedAssetBundle;
# endif

# if ENABLE_IOS_APP_SLICING
            options |= BuildAssetBundleOptions.UncompressedAssetBundle;
# endif
        }

        BuildPipeline.BuildAssetBundles( "Assets/ODR", options, EditorUserBuildSettings.activeBuildTarget );
    }

}
</code></pre>

<p>这段代码将在 Unity Editor 菜单栏中创建一个名为 <strong>Bundle</strong> 的新菜单。单击此菜单并选择列表中唯一的菜单项 <strong>Build iOS App Slices</strong>。此时将在 <strong>ODR</strong> 文件夹中生成 AssetBundles。</p>

<p>然后，要加载资源，请将此类放在项目中的某个位置，并传入要加载的变体的名称：</p>

<pre><code>using UnityEngine;
using UnityEngine.iOS;
using System;
using System.Collections;

public class LoadBundle : MonoBehaviour
{
    public AssetBundle     TextureBundle;


    void Start( )
    {
        StartCoroutine( LoadAsset( "textures.hd", "textures" ) );
    }

    public IEnumerator LoadAsset( string resourceName, string odrTag )
    {
        // 创建请求
        OnDemandResourcesRequest request = OnDemandResources.PreloadAsync( new string[] { odrTag } );

        // 等待请求完成
        yield return request;

        // 检查是否有错误
        if( request.error != null )
            throw new Exception( "ODR request failed: " + request.error );

        TextureBundle = AssetBundle.LoadFromFile( "res://" + resourceName );

        request.Dispose( );
    }
}
</code></pre>

<p>要了解有关 AssetBundles 和按需加载资源的更多信息，请参阅 Bitbucket 上托管的 Unity <a href="https://bitbucket.org/Unity-Technologies/assetbundledemo">AssetBundle Manager 演示项目</a>。登陆页面提供了有关如何使用和调整演示项目的全面说明。</p>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="iosCustomWWWRequest.html"></a></span><div class="tip">Customising WWW Requests on iOS</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="iphone-unsupported.html"></a></span><div class="tip">Unity iOS 目前不支持的功能</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">Copyright © 2017 Unity Technologies. Publication 5.6</div>
<div class="menu">
<a href="http://unity3d.com/learn">教程</a><a href="http://answers.unity3d.com">社区答案</a><a href="https://support.unity3d.com/hc/en-us">知识库</a><a href="http://forum.unity3d.com">论坛</a><a href="http://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
